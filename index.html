<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>时钟</title>
	<style type="text/css">
		#mycanvas{
			width: 500px;
			height: 500px;
			box-shadow: 2px 2px 10px 2px rgba(120,120,120,0.5);
			background-color: skyblue;
		}
	</style>
</head>
<body>
	<canvas id="mycanvas"></canvas>
	<script type="text/javascript">
		var canvas = document.getElementById('mycanvas');
		canvas.width = canvas.offsetWidth;
		canvas.height = canvas.offsetHeight;
		var ctx = canvas.getContext('2d');
		function clock(){
			//全部还原,清除
			canvas.width = canvas.width;
			//偏移中心点
			ctx.translate(250,250);
			//表盘
			ctx.beginPath();
			ctx.arc(0,0,220,0,Math.PI*2,false);
			ctx.closePath();
			ctx.lineWidth = 5;
			ctx.strokeStyle = "purple";
			ctx.stroke();
			//刻度
			ctx.save();
			ctx.lineJoin = "round";
			for(var i=0;i<60;i++){
				if(i % 5 == 0){
					ctx.beginPath();
					ctx.moveTo(0,-210);
					ctx.lineTo(0,-190);
					ctx.closePath();
					ctx.lineWidth = 6;
					ctx.strokeStyle ="black";
					ctx.stroke();
				}else{	
					ctx.beginPath();
					ctx.moveTo(0,-210);
					ctx.lineTo(0,-190);
					ctx.closePath();
					ctx.lineWidth = 3;
					ctx.strokeStyle ="gray";
					ctx.stroke();
				}
				ctx.rotate(Math.PI/30);
			}
			ctx.restore();
			//获取当前时间
			var date = new Date();
			var h = date.getHours();
			var m = date.getMinutes();
			var s = date.getSeconds();
			var ms = date.getMilliseconds();
			// 时针
			ctx.save();
			ctx.rotate(Math.PI/6*h + Math.PI/6/60*m);
			ctx.beginPath();
			ctx.moveTo(0,0);
			ctx.lineTo(0,-120);
			ctx.closePath();
			ctx.lineWidth = 8;
			ctx.strokeStyle = "blue";
			ctx.lineJoin = "round";
			ctx.stroke();
			ctx.restore();
			// 分针
			ctx.save();
			ctx.rotate(Math.PI/30*m + Math.PI/30/60*s);
			ctx.beginPath();
			ctx.moveTo(0,0);
			ctx.lineTo(0,-180);
			ctx.closePath();
			ctx.strokeStyle = "orange";
			ctx.lineWidth = 5;
			ctx.lineJoin = "round";
			ctx.stroke();
			ctx.restore();
			// 秒针
			ctx.save();
			ctx.rotate(Math.PI/30*s + Math.PI/30/1000*ms);
			ctx.beginPath();
			ctx.moveTo(0,0);
			ctx.lineTo(0,-200);
			ctx.closePath();
			ctx.strokeStyle = "green";
			ctx.lineWidth = 3;
			ctx.lineJoin = "round";
			ctx.stroke();
			//中心点
			ctx.beginPath();
			ctx.arc(0,0,10,0,Math.PI*2,false);
			ctx.closePath();
			ctx.fillStyle = "red";
			ctx.fill();
			requestAnimationFrame(clock);
		}
		requestAnimationFrame(clock);
	</script>
</body>
</html>